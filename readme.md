## Table of contents
* [Background](#background)
* [Project process](#project-process)
* [Setup](#setup)

## Background
Last autumn Kalmar Kommun and Fredrik Ahlgren held a presentation over different IoT projects. One project presented was a project that would with the help of IoT solve some problems Kalmar Kommun has when it comes to the watering of plants and gardens around the county. Now they have to drive large distances to check if water is needed in the plants. If this problem is solved it would make Kalmar Kommun able to use their stab more effectively and also the cost for the fuel would go down because of the removal of unnecessary trips. Lnu and Kalmar Energi provide communication over LoRa in Kalmar. Kalmar Kommun has the ambition to use the LoRa network in their work to become a smarter city. Therefore the LoRa technology was used in this project.
	
## Project process
The project started with the research of different types of moisture sensors. Many articles, experiments, and blogposts were read. This research resulted in the conclusion that the Capacitive sensor is superior to the resistive sensor. The resistive sensor has exposed metal parts that corrode after just a short time period. This creates issues with values received from the sensors and a user of the sensor would have to recalibrate it after just a few days. This was experienced in this project when using the resistive sensors during the first week of the project. The resistive sensors were used during the learning phase with LoRaWAN. And after two days the sensors started to corrode and the values received from the sensors were not reliable. The lowest value received in the calibration was now much higher (calibration is explained later in this section). The main reason the resistive sensors were used for a couple of days while implementing and testing LoRaWAN was that the capacitive sensor purchased for this project turned out to have a defect. The defect made the sensor unusable, the value received from the sensor did not differ if the sensor was completely in water or dry air. Comments on e-commerce sites selling the sensor confirmed that the defect was well known. A decision was made to look for other capacitive sensors. A sensor with good reviews from Adafruit was found and that sensor was ordered. While waiting for the sensor to arrive work proceeded with the resistive sensors and the server development started. When the sensor arrived it was calibrated. The calibration process starts with receiving a value from the sensor when the sensor is in 100% water and one value when the sensor is in dry air. The values are set to the sensor as DRY_VALUE and WET_VALUE. A formula covering the values to percent is implemented and the value from the sensor is received as a value between 0 - 100 % moisture. After a few days with the Adafruit sensor and good results from tests, a decision was made to add one more sensor to the project. This time a sensor from DFRobot. The value from the sensor is read with an analog pin which resulted in a quick implementation without any issues. With two working sensors test began to monitor the behavior of the sensor in soils of variant moisture level (see figure 1). Measurements was made with a moisture meter for soil and compared with the value received from the sensors and the two values correlated. For testing purposes a sensor without Lora connection was built and installed in Kalmar kommuns greenhouse. The staff in the green house could use this sensor to test the sensors behavior. The experience the staff possesses in watering plant could in this test be used to test the sensor (see figure 2). Parallel to the sensor testing the development of the server-side on Openstack proceeded. The DFRobot sensor was bought with water protection. The Adafruit sensor was made waterproof by using epoxy glue on the exposed electrical parts (see figure 3). The hardware parts is placed in waterproof electrical boxes. Now the sensors are ready for real environmental testing. After the sensors where placed in the greenhouse, values from the sensors was received ten times in twenty-four hours. Parallel to the monitoring of the sensors the development of an Android application used to send and receive values from the sensor began.